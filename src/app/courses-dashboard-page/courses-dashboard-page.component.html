<div class="container-fluid w-100 h-100 vh-100">
    <!-- main content -->
    <div class="row justify-content-center flex-wrap mb-2 "  *ngIf="currentRole=='ADMIN'">
        <h2 class="text-center mt-5 mb-4  mt-2 text-3xl sm:text-4xl leading-8 font-extrabold tracking-tight">Administracion de Recursos Educativos {{currentRole}}</h2>
        <div class="col-md-auto col-lg-12 col-sm-6 justify-content-center d-flex ">
          <div class="card w-100 text-white d-flex flex-column p-3" style="background-color: rgba(0, 0, 0, 0.5); border-radius: 15px;">
              <h2 class="text-start mt-5 mb-4  mt-2 text-3xl sm:text-4xl leading-8 font-extrabold tracking-tight">{{ indiceEditar === null ? 'Agregar Recurso' : 'Editar Recurso' }}</h2>
          <div class="card w-75 text-white d-flex flex-column p-3" style="background-color: rgba(0, 0, 0, 0.5); border-radius: 15px;">
             <form #signupForm="ngForm" class="w-100 mt-2 text-secondary" (ngSubmit)="registrer()" method="post">
              <!-- Nombre -->
              <label for="Nombre" class="form-label text-secondary">Nombre: </label>
              <input
                type="text"
                id="Nombre"
                name="name"
                required
                [(ngModel)]="newResouce.name"
                class="form-control w-50"
                [ngClass]="{ 'is-invalid': signupForm.submitted && nameField.invalid }"
                #nameField="ngModel"
              />
              <div *ngIf="signupForm.submitted && nameField.invalid" class="invalid-feedback">
                El nombre es obligatorio.
              </div>

              <!-- Selects -->
              <div class="input-group mb-3 mt-2">

                <!-- Carrier Path -->
                <label class="input-group-text" for="inputGroupSelect01">Carrier Path</label>
                <select
                  class="form-select"
                  id="inputGroupSelect01"
                  name="carrierPath"
                  required
                  [(ngModel)]="newResouce.carrierPath"
                  [ngClass]="{ 'is-invalid': signupForm.submitted && carrierPathField.invalid }"
                  #carrierPathField="ngModel"
                >
                  <option [ngValue]="null" disabled>Choose...</option>
                  <option *ngFor="let option of carrierPath" [ngValue]="option.title">{{ option.title }}</option>
                </select>
                <div *ngIf="signupForm.submitted && carrierPathField.invalid" class="invalid-feedback">
                  Selecciona una ruta profesional.
                </div>

                <!-- Recurso -->
                <label class="input-group-text" for="inputGroupSelect02">Recurso</label>
                <select
                  class="form-select"
                  id="inputGroupSelect02"
                  name="type"
                  required
                  [(ngModel)]="newResouce.type"
                  [ngClass]="{ 'is-invalid': signupForm.submitted && typeField.invalid }"
                  #typeField="ngModel"
                >
                  <option [ngValue]="null" disabled>Choose...</option>
                  <option *ngFor="let info of mainInfo" [ngValue]="info.title">{{ info.title }}</option>
                </select>
                <div *ngIf="signupForm.submitted && typeField.invalid" class="invalid-feedback">
                  Selecciona un tipo de recurso.
                </div>

                <!-- Stack -->
                <label class="input-group-text" for="inputGroupSelect03">Stack Tecnologico</label>
                <select
                  class="form-select"
                  id="inputGroupSelect03"
                  name="tecnologyStack"
                  required
                  [(ngModel)]="newResouce.tecnologyStack"
                  [ngClass]="{ 'is-invalid': signupForm.submitted && stackField.invalid }"
                  #stackField="ngModel"
                >
                  <option [ngValue]="null" disabled>Choose...</option>
                  <option *ngFor="let option of stacks" [ngValue]="option.title">{{ option.title }}</option>
                </select>
                <div *ngIf="signupForm.submitted && stackField.invalid" class="invalid-feedback">
                  Selecciona un stack tecnológico.
                </div>

                <!-- Puntuación -->
                <label class="input-group-text" for="inputGroupSelect04">Puntuacion</label>
                <select
                  class="form-select"
                  id="inputGroupSelect04"
                  name="points"
                  required
                  [(ngModel)]="newResouce.score"
                  [ngClass]="{ 'is-invalid': signupForm.submitted && pointsField.invalid }"
                  #pointsField="ngModel"
                >
                  <option [ngValue]="null" disabled>Choose...</option>
                  <option *ngFor="let point of puntuation" [ngValue]="point">{{ point }}</option>
                </select>
                <div *ngIf="signupForm.submitted && pointsField.invalid" class="invalid-feedback">
                  Selecciona una puntuación.
                </div>

                <!-- Disponible -->
                <label class="input-group-text" for="inputGroupSelect05">Disponible</label>
                <select
                  class="form-select"
                  id="inputGroupSelect05"
                  name="available"
                  required
                  [(ngModel)]="newResouce.available"
                  [ngClass]="{ 'is-invalid': signupForm.submitted && availableField.invalid }"
                  #availableField="ngModel"
                >
                  <option [ngValue]="null" disabled>Choose...</option>
                  <option *ngFor="let available of disponibilidad" [ngValue]="available.title">{{ available.title }}</option>
                </select>
                <div *ngIf="signupForm.submitted && availableField.invalid" class="invalid-feedback">
                  Selecciona la disponibilidad.
                </div>
              </div>

              <!-- Descripción -->
              <label for="resourseDescripcion" class="form-label text-secondary">Descripción</label>
              <textarea
                id="resourseDescripcion"
                name="description"
                class="form-control w-75"
                rows="5"
                required
                [(ngModel)]="newResouce.description"
                [ngClass]="{ 'is-invalid': signupForm.submitted && descriptionField.invalid }"
                #descriptionField="ngModel"
              ></textarea>
              <div *ngIf="signupForm.submitted && descriptionField.invalid" class="invalid-feedback">
                Agrega una descripción del recurso.
              </div>

  <!-- Botones -->
              <div class="text-center mt-3">
                <button type="button" class="btn btn-success" (click)="addResource()"><i class="fa-regular fa-square-plus"></i>Agregar</button>
                <button type="button" class="btn btn-secondary w-25" *ngIf="indiceEditar !== null" (click)="cancelarEdicion()"><i class="fa-regular fa-rectangle-xmark"></i></button>
                <button type="submit" class="btn btn-primary w-25">Guardar</button>
              </div>
            </form>
          </div>
            <h3 class="text-start mt-5 mb-4  mt-2 text-3xl sm:text-4xl leading-8 font-extrabold tracking-tight">Recursos Actuales</h3>
            <div class="card w-100 text-white d-flex flex-column p-3" style="background-color: rgba(0, 0, 0, 0.5); border-radius: 15px;">
              <table class="table table-striped table-dark  w-75 align-self-center mt-3 mb-3" style="border-radius: 15px; overflow: hidden;">
                <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Carrier Path</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Stack Tecnologico</th>
                    <th scope="col">Description</th>
                    <th scope="col">Puntuacion</th>
                    <th scope="col">Disponible</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let resourse of resources; let indiceEditar = index">
                    <td>{{resourse.name}}</td>
                    <td>{{resourse.carrierPath}}</td>
                    <td>{{resourse.type}}</td>
                    <td>{{resourse.tecnologyStack}}</td>
                    <td>{{resourse.description}}</td>
                    <td>{{resourse.score}}</td>
                    <td>{{resourse.available}}</td>
                    <td>
                      <button type="submit" class="btn btn-danger w-25 " (click)="this.deleteResource(indiceEditar)">Eliminar</button>
                      <button type="submit" class="btn btn-primary w-25 " (click)="this.editResource(indiceEditar)">Editar</button>
                      
                    </td>
                </tr>
            </tbody>
            </table>
            </div>
            
          </div>
           
        </div>

    </div>
     <div class="row justify-content-center mt-2" style="border: solid 2px #ccc; padding: 20px;">
        <div class="col-md-12">
          <div class="row justify-content-center mt-2" style="border: solid 2px #ccc; padding: 20px;">
            <h3 class="text-center text-dark">Recursos Activos</h3>
            <p class="text-center text-secondary">Bievenido {{currentStudent}} en esta seccion encontraras los recursos y actividades disponibles para su consulta</p>
            <p class="text-center text-secondary">Hay {{currentResources.length}} recursos disponibles</p>
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">Carrier Path</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Stack Tecnologico</th>
                    <th scope="col">Description</th>
                    <th scope="col">Puntuacion</th>
                    <th scope="col">Disponible</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let resource of currentResources ; let indiceEditar = index; ">
                    <td>{{resource.id}}</td>
                    <td>{{resource.name}}</td>
                    <td>{{resource.carrierPath}}</td>
                    <td>{{resource.tecnologyStack}}</td>
                    <td>{{resource.type}}</td>
                    <td>{{resource.description}}</td>
                    <td>{{resource.score}}</td>
                    <td>{{resource.available}}</td>
                    <td>
                      <button type="submit" class="btn btn-danger w-25 ml-2 mb-4 text-center" (click)="this.delete(resource)" *ngIf="currentRole === 'ADMIN'">Eliminar</button>
                      <button type="submit" class="btn btn-primary w-25 ml-2 mb-4 text-center" (click)="this.editModal(indiceEditar)" *ngIf="currentRole === 'ADMIN'">Editar</button>
                      <button type="submit" class="btn btn-primary w-25 ml-2 mb-4 text-center" (click)="this.editModal(indiceEditar)">Abrir</button>
                    </td>
                </tr>
            </tbody>
        </table>
      </div>
</div>
</div>
</div>
